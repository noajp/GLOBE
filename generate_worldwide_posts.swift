import Foundation

// 世界中の主要都市の座標（緯度、経度、都市名）
let worldCities: [(lat: Double, lng: Double, name: String)] = [
    // アジア
    (35.6762, 139.6503, "東京"),
    (35.1796, 136.9066, "名古屋"),
    (34.6937, 135.5023, "大阪"),
    (35.0116, 135.7681, "京都"),
    (37.5665, 126.9780, "ソウル"),
    (39.9042, 116.4074, "北京"),
    (31.2304, 121.4737, "上海"),
    (22.3193, 114.1694, "香港"),
    (25.0330, 121.5654, "台北"),
    (1.3521, 103.8198, "シンガポール"),
    (13.7563, 100.5018, "バンコク"),
    (10.8231, 106.6297, "ホーチミン"),
    (3.1390, 101.6869, "クアラルンプール"),
    (-6.2088, 106.8456, "ジャカルタ"),
    (14.5995, 120.9842, "マニラ"),
    (28.6139, 77.2090, "ニューデリー"),
    (19.0760, 72.8777, "ムンバイ"),

    // 北米
    (40.7128, -74.0060, "ニューヨーク"),
    (34.0522, -118.2437, "ロサンゼルス"),
    (41.8781, -87.6298, "シカゴ"),
    (29.7604, -95.3698, "ヒューストン"),
    (33.4484, -112.0740, "フェニックス"),
    (37.7749, -122.4194, "サンフランシスコ"),
    (47.6062, -122.3321, "シアトル"),
    (25.7617, -80.1918, "マイアミ"),
    (43.6532, -79.3832, "トロント"),
    (45.5017, -73.5673, "モントリオール"),
    (49.2827, -123.1207, "バンクーバー"),
    (19.4326, -99.1332, "メキシコシティ"),

    // ヨーロッパ
    (51.5074, -0.1278, "ロンドン"),
    (48.8566, 2.3522, "パリ"),
    (52.5200, 13.4050, "ベルリン"),
    (41.9028, 12.4964, "ローマ"),
    (40.4168, -3.7038, "マドリード"),
    (41.3851, 2.1734, "バルセロナ"),
    (55.7558, 37.6173, "モスクワ"),
    (59.9343, 30.3351, "サンクトペテルブルク"),
    (52.3676, 4.9041, "アムステルダム"),
    (50.8503, 4.3517, "ブリュッセル"),
    (47.4979, 19.0402, "ブダペスト"),
    (50.0755, 14.4378, "プラハ"),
    (59.3293, 18.0686, "ストックホルム"),

    // 南米
    (-23.5505, -46.6333, "サンパウロ"),
    (-22.9068, -43.1729, "リオデジャネイロ"),
    (-34.6037, -58.3816, "ブエノスアイレス"),
    (-33.4489, -70.6693, "サンティアゴ"),
    (4.7110, -74.0721, "ボゴタ"),
    (-12.0464, -77.0428, "リマ"),

    // オセアニア
    (-33.8688, 151.2093, "シドニー"),
    (-37.8136, 144.9631, "メルボルン"),
    (-27.4698, 153.0251, "ブリスベン"),
    (-36.8485, 174.7633, "オークランド"),

    // 中東・アフリカ
    (25.2048, 55.2708, "ドバイ"),
    (33.8938, 35.5018, "ベイルート"),
    (41.0082, 28.9784, "イスタンブール"),
    (30.0444, 31.2357, "カイロ"),
    (-26.2041, 28.0473, "ヨハネスブルグ"),
    (-33.9249, 18.4241, "ケープタウン"),
]

let postTemplates = [
    "素晴らしい景色！",
    "今日はいい天気",
    "美味しいランチ",
    "散歩中",
    "友達と一緒",
    "楽しい一日",
    "初めて来た",
    "また来たい",
    "最高の場所",
    "リラックス",
    "カフェタイム",
    "夕日がきれい",
    "朝の散歩",
    "夜景がすごい",
    "お気に入りの場所"
]

// ユーザーID（開発用の固定ID）
let devUserId = "00000000-0000-0000-0000-000000000001"

// 1万件の投稿を生成
let totalPosts = 10000
let postsPerBatch = 100

print("Generating \(totalPosts) posts worldwide...")

for batch in 0..<(totalPosts / postsPerBatch) {
    var insertStatements: [String] = []

    for i in 0..<postsPerBatch {
        let city = worldCities.randomElement()!
        let template = postTemplates.randomElement()!

        // ランダムなオフセット（±0.1度 = 約11km）
        let latOffset = Double.random(in: -0.1...0.1)
        let lngOffset = Double.random(in: -0.1...0.1)

        let lat = city.lat + latOffset
        let lng = city.lng + lngOffset

        let content = "\(template) #\(batch * postsPerBatch + i + 1)"
        let likeCount = Int.random(in: 0...100)

        let createdAt = "NOW() - INTERVAL '\(Int.random(in: 0...720)) hours'"
        let expiresAt = "NOW() + INTERVAL '\(Int.random(in: 1...24)) hours'"

        let sql = """
        ('\(devUserId)', '\(content)', '\(city.name)', \(lat), \(lng), true, false, \(createdAt), \(expiresAt), \(likeCount))
        """

        insertStatements.append(sql)
    }

    let batchSQL = """
    INSERT INTO posts (user_id, content, location_name, latitude, longitude, is_public, is_anonymous, created_at, expires_at, like_count)
    VALUES \(insertStatements.joined(separator: ",\n"));
    """

    print("Batch \(batch + 1)/\(totalPosts / postsPerBatch): \(insertStatements.count) posts")
    print(batchSQL)
    print("\n---\n")
}

print("Done!")
